name: cicd pipeline
on:
 push:
  branches: ['main']
 workflow_dispatch: 
jobs:
 first:
  runs-on: ubuntu-latest
  steps:
  - name: Checkout
    uses: actions/checkout@v4
  # - name: Set up Java
  #   uses: actions/setup-java@v4
  #   with:
  #    java-version: '17'
  #    distribution: 'temurin'
  #    cache: maven
  - name: Trivy Install
    run: | 
     sudo apt-get install wget apt-transport-https gnupg lsb-release
     wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | sudo apt-key add -
     echo deb https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main | sudo tee -a /etc/apt/sources.list.d/trivy.list
     sudo apt-get update
     sudo apt-get install trivy

  - name: Trivy Scan
    run: trivy fs --format table -o fs-report.json .

  - name: first pipeline
    run: echo 'Hello new pipeline'
